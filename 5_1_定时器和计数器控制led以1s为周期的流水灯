# include<REG51.H>
sbit led=P2^0;
int main(void){
    unsigned char cout;//设置无符号变量cout，储存定时器中断次数
    TMOD = 0x01;//设置T0为模式，由TR0控制启动和停止，且工作于方式1
    TH0 = (65536-46083)/256;//初始化T0的高8位，设置定时器的初值
    TL0 = (65536-46083)%256;//初始化T0的低8位，设置定时器的初值
    TF0 = 0;//初始化定时器中断标志位，用于清除中断标志位
    P0 = 0Xff;//关闭led灯
    cout =0 ;//从0开始计数
    TR0 = 1;//启动定时器T0
    while(1){
        while (TF0 == 1)//如果定时器溢出
        {
            /* code */
            cout++;//计数次数+1;
            if(cout==20){//如果计数次数为20次(1s)，则关闭led灯
                led=~led;//取反led灯,led闪烁
                cout=0;//计数次数清零
            }
            TH0 = (65536-46083)/256;//重新设置T0的高8位，设置定时器的初值
            TL0 = (65536-46083)%256;//重新设置T0的低8位，设置定时器的初值
            TF0=0;//重新初始化定时器中断标志位，用于清除中断标志位
        }
        
    }
}
